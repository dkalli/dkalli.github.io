<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>수학 연산 퀴즈</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-blue-100 min-h-screen flex items-center justify-center p-4">
  <div id="app" class="w-full max-w-md bg-white shadow-xl rounded-2xl p-6 space-y-6">
    <h1 class="text-2xl font-bold text-center">🔢 수학 연산 퀴즈</h1>
    <div id="quiz-area" class="space-y-4"></div>
    <button id="next-btn" class="w-full py-2 rounded-xl bg-indigo-500 text-white font-semibold disabled:opacity-40 disabled:pointer-events-none">다음 문제</button>
    <div id="result-area" class="text-center text-xl font-bold hidden"></div>
  </div>

  <script>
    const TOTAL_QUESTIONS = 10;
    const MIN = 1, MAX = 100;
    const ops = [
      { sym: '+', fn: (a, b) => a + b },
      { sym: '-', fn: (a, b) => a - b },
      { sym: '×', fn: (a, b) => a * b },
      { sym: '÷', fn: (a, b) => Math.floor(a / b) }
    ];

    const state = {
      qIndex: 0,
      score: 0,
      curAnswer: null
    };

    const quizArea = document.getElementById('quiz-area');
    const nextBtn = document.getElementById('next-btn');
    const resultArea = document.getElementById('result-area');

    nextBtn.addEventListener('click', () => {
      if (state.qIndex < TOTAL_QUESTIONS) {
        renderQuestion();
      } else {
        resetQuiz();
      }
    });

    function randInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function genQuestion() {
      const opObj = ops[randInt(0, ops.length - 1)];
      let a = randInt(MIN, MAX);
      let b = randInt(MIN, MAX);
      if (opObj.sym === '÷') {
        a = a * b;
      }
      const questionText = `${a} ${opObj.sym} ${b}`;
      const correct = opObj.fn(a, b);
      const choices = new Set([correct]);
      while (choices.size < 4) {
        let delta = randInt(-10, 10);
        if (delta === 0) continue;
        choices.add(correct + delta);
      }
      return { questionText, correct, choices: Array.from(choices).sort(() => Math.random() - 0.5) };
    }

    function renderQuestion() {
      const { questionText, correct, choices } = genQuestion();
      state.curAnswer = correct;
      quizArea.innerHTML = `
        <h2 class="text-center text-lg font-semibold">문제 ${state.qIndex + 1} / ${TOTAL_QUESTIONS}</h2>
        <p class="text-center text-xl font-bold">${questionText} = ?</p>
        <div class="grid grid-cols-2 gap-3 mt-4">
          ${choices.map((c) => `<button data-val="${c}" class="choice py-2 rounded-xl bg-indigo-100 hover:bg-indigo-200 font-medium">${c}</button>`).join('')}
        </div>
        <p id="feedback" class="mt-3 text-center text-base font-semibold"></p>
      `;
      document.querySelectorAll('.choice').forEach(btn => btn.addEventListener('click', handleChoice));
      nextBtn.disabled = true;
      resultArea.classList.add('hidden');
    }

    function handleChoice(e) {
      const val = parseInt(e.currentTarget.dataset.val);
      const feedback = document.getElementById('feedback');
      if (val === state.curAnswer) {
        state.score++;
        feedback.textContent = '✅ 정답!';
        feedback.className = 'mt-3 text-center text-green-600 font-semibold';
      } else {
        feedback.textContent = `❌ 오답! 정답은 ${state.curAnswer}`;
        feedback.className = 'mt-3 text-center text-red-600 font-semibold';
      }
      document.querySelectorAll('.choice').forEach(btn => btn.disabled = true);
      nextBtn.disabled = false;

      state.qIndex++;
      if (state.qIndex === TOTAL_QUESTIONS) {
        nextBtn.textContent = '결과 보기';
      }
    }

    function showResult() {
      quizArea.innerHTML = '';
      resultArea.textContent = `🎉 당신의 점수: ${state.score} / ${TOTAL_QUESTIONS}`;
      resultArea.classList.remove('hidden');
      nextBtn.textContent = '다시 시작';
      nextBtn.disabled = false;
    }

    function resetQuiz() {
      if (state.qIndex === TOTAL_QUESTIONS) {
        showResult();
        state.qIndex = 0;
        state.score = 0;
        return;
      }
      nextBtn.textContent = '다음 문제';
      renderQuestion();
    }

    renderQuestion();
  </script>
</body>
</html>